{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/lib/supabase/middleware.ts"],"sourcesContent":["import { createServerClient, type CookieOptions } from \"@supabase/ssr\"\r\nimport { NextResponse, type NextRequest } from \"next/server\"\r\n\r\nexport async function updateSession(request: NextRequest) {\r\n  let response = NextResponse.next({\r\n    request,\r\n  })\r\n\r\n  const supabase = createServerClient(\r\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\r\n    {\r\n      cookies: {\r\n        get(name: string) {\r\n          return request.cookies.get(name)?.value\r\n        },\r\n        set(name: string, value: string, options: CookieOptions) {\r\n          request.cookies.set({ name, value, ...options })\r\n          response.cookies.set({ name, value, ...options })\r\n        },\r\n        remove(name: string, options: CookieOptions) {\r\n          request.cookies.set({ name, value: \"\", ...options })\r\n          response.cookies.set({ name, value: \"\", ...options })\r\n        },\r\n      },\r\n    },\r\n  )\r\n\r\n  // Refresh session\r\n  const { data: { user } } = await supabase.auth.getUser()\r\n\r\n  const path = request.nextUrl.pathname\r\n\r\n  // Public paths\r\n  const publicPaths = ['/', '/auth/login', '/auth/signup', '/auth/callback', '/auth/confirm', '/auth/reset-password']\r\n  const isPublicPath = publicPaths.some(p => path === p || path.startsWith(p))\r\n\r\n  // Protected paths\r\n  const protectedPaths = ['/student', '/instructor', '/api']\r\n  const isProtectedPath = protectedPaths.some(p => path.startsWith(p))\r\n\r\n  // Redirect logic\r\n  if (!user && isProtectedPath) {\r\n    // Not logged in, trying to access protected path\r\n    const redirectUrl = request.nextUrl.clone()\r\n    redirectUrl.pathname = '/auth/login'\r\n    redirectUrl.searchParams.set('redirectTo', path)\r\n    return NextResponse.redirect(redirectUrl)\r\n  }\r\n\r\n  if (user && (path === '/auth/login' || path === '/auth/signup')) {\r\n    // Logged in, trying to access auth pages\r\n    const redirectUrl = request.nextUrl.clone()\r\n    redirectUrl.pathname = '/student/dashboard' // Default redirect\r\n    return NextResponse.redirect(redirectUrl)\r\n  }\r\n\r\n  return response\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AAAA;AACA;AAAA;;;AAEO,eAAe,cAAc,OAAoB;IACtD,IAAI,WAAW,gMAAY,CAAC,IAAI,CAAC;QAC/B;IACF;IAEA,MAAM,WAAW,IAAA,uMAAkB,sUAGjC;QACE,SAAS;YACP,KAAI,IAAY;gBACd,OAAO,QAAQ,OAAO,CAAC,GAAG,CAAC,OAAO;YACpC;YACA,KAAI,IAAY,EAAE,KAAa,EAAE,OAAsB;gBACrD,QAAQ,OAAO,CAAC,GAAG,CAAC;oBAAE;oBAAM;oBAAO,GAAG,OAAO;gBAAC;gBAC9C,SAAS,OAAO,CAAC,GAAG,CAAC;oBAAE;oBAAM;oBAAO,GAAG,OAAO;gBAAC;YACjD;YACA,QAAO,IAAY,EAAE,OAAsB;gBACzC,QAAQ,OAAO,CAAC,GAAG,CAAC;oBAAE;oBAAM,OAAO;oBAAI,GAAG,OAAO;gBAAC;gBAClD,SAAS,OAAO,CAAC,GAAG,CAAC;oBAAE;oBAAM,OAAO;oBAAI,GAAG,OAAO;gBAAC;YACrD;QACF;IACF;IAGF,kBAAkB;IAClB,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;IAEtD,MAAM,OAAO,QAAQ,OAAO,CAAC,QAAQ;IAErC,eAAe;IACf,MAAM,cAAc;QAAC;QAAK;QAAe;QAAgB;QAAkB;QAAiB;KAAuB;IACnH,MAAM,eAAe,YAAY,IAAI,CAAC,CAAA,IAAK,SAAS,KAAK,KAAK,UAAU,CAAC;IAEzE,kBAAkB;IAClB,MAAM,iBAAiB;QAAC;QAAY;QAAe;KAAO;IAC1D,MAAM,kBAAkB,eAAe,IAAI,CAAC,CAAA,IAAK,KAAK,UAAU,CAAC;IAEjE,iBAAiB;IACjB,IAAI,CAAC,QAAQ,iBAAiB;QAC5B,iDAAiD;QACjD,MAAM,cAAc,QAAQ,OAAO,CAAC,KAAK;QACzC,YAAY,QAAQ,GAAG;QACvB,YAAY,YAAY,CAAC,GAAG,CAAC,cAAc;QAC3C,OAAO,gMAAY,CAAC,QAAQ,CAAC;IAC/B;IAEA,IAAI,QAAQ,CAAC,SAAS,iBAAiB,SAAS,cAAc,GAAG;QAC/D,yCAAyC;QACzC,MAAM,cAAc,QAAQ,OAAO,CAAC,KAAK;QACzC,YAAY,QAAQ,GAAG,sBAAqB,mBAAmB;QAC/D,OAAO,gMAAY,CAAC,QAAQ,CAAC;IAC/B;IAEA,OAAO;AACT"}},
    {"offset": {"line": 101, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/middleware.ts"],"sourcesContent":["// middleware.ts (root)\r\nimport { NextRequest } from \"next/server\"\r\nimport { updateSession } from \"./lib/supabase/middleware\"\r\n\r\nexport async function middleware(request: NextRequest) {\r\n  // Forward request to your session updater\r\n  return updateSession(request)\r\n}\r\n\r\n// Keep the same matcher you had in the helper file (or adjust)\r\nexport const config = {\r\n  matcher: [\"/((?!_next/static|_next/image|favicon.ico|.*\\\\.(?:svg|png|jpg|jpeg|gif|webp)$).*)\"],\r\n}\r\n"],"names":[],"mappings":"AAAA,uBAAuB;;;;;;;AAEvB;;AAEO,eAAe,WAAW,OAAoB;IACnD,0CAA0C;IAC1C,OAAO,IAAA,sJAAa,EAAC;AACvB;AAGO,MAAM,SAAS;IACpB,SAAS;QAAC;KAAoF;AAChG"}}]
}